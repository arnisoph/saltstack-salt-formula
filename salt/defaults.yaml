{% load_yaml as rawmap %}
Debian:
  repo_url: http://debian.saltstack.com/debian
  repo_dist: {{ salt['grains.get']('oscodename') }}-saltstack
  repo_comps: main
  repo_keyurl: http://debian.saltstack.com/debian-salt-team-joehealy.gpg.key
  master:
    pkgs:
      - salt-master
      - python-git
      - python-apt
      - python-mysqldb
      - lsb-release
    config:
      manage:
        - master
      master:
        path: /etc/salt/master
        mode: 600
        dataset_pillar: salt:lookup:master:config:master:config
    service: {}
  minion:
    pkgs:
      - salt-minion
      - python-git
      - python-apt
      - python-mysqldb
      - lsb-release
    config:
      manage:
        - minion
      minion:
        path: /etc/salt/minion
        mode: 600
        dataset_pillar: salt:lookup:minion:config:minion:config
    service: {}
  syndic:
    pkgs:
      - salt-syndic
    service: {}
RedHat:
  master:
    pkgs:
      - salt-master
    config:
      manage:
        - master
      master:
        path: /etc/salt/master
        mode: 600
        dataset_pillar: salt:lookup:master:config:master:config
    service: {}
  minion:
    pkgs:
      - salt-minion
    config:
      manage:
        - minion
      minion:
        path: /etc/salt/minion
        mode: 600
        dataset_pillar: salt:lookup:minion:config:minion:config
    service: {}
  syndic:
    pkgs:
      - salt-syndic
    service: {}
{% endload %}

{# TODO deliver key via salt fileserver instead over the Internet? #}
